<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Подключение шрифтов</title>
    <link rel="stylesheet" href="./css/css-properties.css">
</head>
<body>
    <header class="header" id="header">
        <div class="container">
            <nav>
                <a href="../../00_Home/index.html" target="_blank">Главная</a>
                <a href="./css-1.html" target="_blank">CSS-1</a>
                <a href="./css-properties.html" target="_blank">CSS-свойства</a>
            </nav>
        </div>
    </header>
    <main>
        <div class="container">
            <section>
                <h1>Подключение шрифтов</h1>
                <p>
                    Существуют тысячи шрифтов, которые предназначены для оформления текстов. При этом следует отметить, что число шрифтов, применяемых для набора текста на сайтах, существенно ниже. Конечно, ничто не мешает выбрать и задать, например, для заголовка, вычурный шрифт, установленный на локальном компьютере. Но если такого шрифта на компьютере пользователя нет, то текст будет отображаться шрифтом, установленным в браузере по умолчанию. Получается, что усилия разработчика пропадут даром.
                </p>
                <p>
                    Есть три способа избежать этого:
                </p>
                <ul>
                    <li>
                        <strong> Создать надпись в графическом редакторе и вставить её на веб-страницу как изображение.</strong> <br> 
                        Этот метод подключает всю мощь графических систем по управлению текстом, при этом допустимо включать любые шрифты. Из недостатков самый главный состоит в том, что рисунок так просто не изменишь, и придётся вновь обращаться к редактору. Так что рисунки в качестве текста применяются только для создания небольших и постоянных надписей вроде заголовков.
                    </li>
                    <li>
                        <strong>Загрузить пользовательский шрифт.</strong><br>
                        Действительно, если можно загружать по сети изображения, почему бы то же самое не проделать и со шрифтами?
                    </li>
                    <li>
                        <strong>Воспользоваться стандартными шрифтами, встроенными в браузер и операционную систему.</strong><br>
                         Этот способ является пока наиболее распространённым для указания шрифта на веб-странице.
                    </li>
                </ul>
                <ul>
                    <li>
                        <a href="#standart"><strong> Подключение стандартных шрифтов</strong></a>
                    </li>
                    <li>
                        <a href="#google-fonts"><strong>Подключение шрифтов с помощью Google Fonts</strong></a>
                    </li>
                    <li>
                        <a href="#font-face"><strong>Подключение шрифтов с помощью правила <span class="slc">@font-face</span></strong></a>
                    </li>
                    <li>
                        <a href="#optimization"><strong>Оптимизация</strong></a>
                    </li>
                </ul>
            </section>
            <section class="standart" id="standart">
                <h2>Подключение стандартных шрифтов</h2>
                <p>
                    Самый простой вариант — вообще не подключать сторонние шрифты и пользоваться стандартными, которые предустановлены в большинстве операционных систем. Поскольку они установлены на каждом устройстве, мы можем свободно использовать эти шрифты на наших сайтах, зная, что независимо от того, какое устройство просматривает наш сайт, шрифт будет отображаться правильно. 
                </p>
                <p>
                    Эти шрифты известны, как «<em>безопасные веб-шрифты</em>». Достаточно просто указать название одного из таких шрифтов в коде, и всё будет работать. Таких шрифтов немного и наиболее надёжные перечислены здесь:
                </p>
                <div class="titles">
                    <ul>
                        <li>Arial</li>
                        <li>Courier New, Courier</li>
                        <li>Garamond</li>
                        <li>Georgia</li>
                        <li>Lucida Sans, Lucida Grande, Lucida</li>
                    </ul>
                    <ul>
                        <li>Palatino Linotype</li>
                        <li>Tahoma</li>
                        <li>Times New Roman, Times</li>
                        <li>Trebuchet</li>
                        <li>Verdana</li>
                    </ul>
                </div>
                <p>
                    Выбор шрифта для оформления текста осуществляется через стилевое свойство <span class="slc">font-family</span>. 
                </p> 
                <p>  
                    Оно устанавливает семейство шрифтов, которое будет использоваться для оформления текста. Список шрифтов может включать одно или несколько названий, разделённых запятой. Если в имени шрифта содержатся пробелы, например, <strong>Times New Roman</strong>, оно должно заключаться в двойные или одинарные кавычки.
                </p>
                <p>
                    Когда браузер встречает первый шрифт в списке, он проверяет его наличие на компьютере пользователя. Если такого шрифта нет, берётся следующее имя из списка и также анализируется на присутствие. Заканчивают список обычно ключевым словом, которое описывает тип шрифта — <em>serif</em> , <em>sans-serif</em> или <em>cursive</em>.
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_39.png" alt="Подключение стандартных шрифтов">
                </p>
                <p>
                    Но, очень часто, дизайн макета не позволяет обойтись веб-безопасным шрифтом, а требует использовать какой-то нестандартный. 
                </p>
                <p>
                    В этом случае при загрузке страницы файл со шрифтом нужно подгружать с сервера ( с компьютера ) по той же схеме, что и остальные ресурсы — CSS-файлы, изображения и т.д. Он может весить довольно много, именно поэтому для быстрой загрузки страницы выгоднее сначала рассмотреть возможность использования стандартных шрифтов.
                </p>
            </section>
            <section class="google-fonts" id="google-fonts">
                <h2>Подключение шрифтов с помощью Google Fonts</h2>
                <p>
                    <a href="https://fonts.google.com/" target="_blank"><strong>Google Fonts</strong></a>  - самый простой и удобный способ подключить нестандартный шрифт. Это бесплатный сервис, с помощью которого можно подключать шрифты, но не хранить их на своём сервере.
                </p>
                <p>
                    Хотя в коллекции сравнительно мало разных шрифтов (их несколько десятков), все они подобраны очень качественно и свободны для использования на сайтах.
                </p>
                <p>
                    Перед выбором шрифта переключите значение <em>Language</em> на <em>Cyrillic</em>, тогда вы увидите список шрифтов поддерживающих русский язык
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_40.png" alt="Google Fonts">
                </p>
                <p>
                    Далее необходимо выбрать шрифт и добавить одно или несколько нужных начертаний
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_41.png" alt="Google Fonts">
                </p>
                <p>
                    Подключить выбранные шрифты можно одним из путей:
                </p>
                <ol>
                    <li>
                        Через элемент <span class="tag">&lt;link&gt;</span>. Скопировать, а затем вставить в <span class="tag">&lt;head&gt;</span> строку, которую сгенерирует <em>Google Fonts</em>  в боковой вкладке <strong>Link</strong>
                    </li>
                    <li>
                        Через правило <span class="slc">@import</span>. Скопировать, а затем вставить в свой CSS-файл в самом верху строку, которую сгенерирует <em>Google Fonts</em>  в боковой вкладке <strong>@import</strong>
                    </li>
                </ol>
                <p>
                    <img src="./img/css-properties-img/Screenshot_42.png" alt="Google Fonts">
                    <img src="./img/css-properties-img/Screenshot_43.png" alt="Google Fonts">
                </p>
                <p>
                    Этого достаточно, чтобы шрифт подключился. Теперь его можно использовать в свойстве <span class="slc">font-family</span> без каких-либо дополнительных действий.
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_44.png" alt="Google Fonts">
                </p>
                <p>
                    Стоит отметить, что после основного шрифта важно указать веб-безопасный. В случае, если нестандартный шрифт не загрузится, браузер воспользуется альтернативным. Его нужно <a href="https://meowni.ca/font-style-matcher/" target="_blank"><strong>подобрать</strong></a> максимально похожим на основной шрифт.
                </p>
                <p>
                    Плюсы этого способа — простота использования и всегда актуальные версии шрифтов, Google Fonts их часто обновляет. Но у него есть и минус — запросы к сторонним серверам могут негативно повлиять на скорость загрузки страницы. Если выбираете этот способ, стоит обратить внимание на <a href="https://csswizardry.com/2020/05/the-fastest-google-fonts/" target="_blank"><strong>оптимизацию</strong></a>.
                </p>
            </section>
            <section class="font-face" id="font-face">
                <h2>Подключение шрифтов с помощью правила <span class="slc">@font-face</span></h2>
                <p>
                    Есть альтернативный способ, при котором файлы со шрифтами хранятся вместе с остальными ресурсами сайта. Для них принято заводить отдельную директорию в корне проекта — например, <strong>fonts</strong>. В неё следует поместить файлы для каждого начертания в нужных форматах — в большинстве случаев, если не требуется поддержка старых браузеров, подойдут <strong>.woff</strong> и <strong>.woff2</strong> 
                </p>
                <p>
                    TTF и OTF — форматы, которые предоставляются с минимальным сжатием или совсем без него. Их стоит использовать только в том случае, если нужна поддержка очень старых браузеров. 
                </p>
                <p>   
                    Во всех остальных ситуациях можно выбрать WOFF и WOFF2 — форматы, которые отличаются высокой степенью сжатия. WOFF2 — усовершенствованная версия предшественника, этот формат можно считать лучшим из существующих. Тем не менее, <a href="https://caniuse.com/#feat=woff2" target="_blank"><strong>поддержка</strong></a> WOFF2 хотя и очень хорошая, но пока не абсолютная. Поэтому в качестве подстраховки для не самых современных браузеров стоит использовать WOFF.
                </p>
                <p>
                    Шрифты можно скачать на <a href="https://fontstorage.com/ru/" target="_blank"><strong>различных ресурсах</strong></a>. При этом всегда нужно обращать внимание на лицензию — некоторые шрифты могут быть недоступны для коммерческого использования.
                </p>
                <p>
                    После того, как шрифты добавлены в проект, их нужно подключить в CSS-файле. Для этого используется правило <span class="slc">@font-face</span>. В самом базовом варианте оно будет включать:
                </p>
                <ol>
                    <li>
                        <p> 
                            Название шрифта, которое затем нужно использовать, чтобы задать элементам подключённый шрифт.
                        </p>
                    </li>
                    <li>
                        Адрес файла со шрифтом, который нужно подключить, и его формат. Если адресов несколько, их можно указать через запятую. В этом случае важен порядок — браузер будет последовательно пытаться подключить файлы. Первым должен быть самый подходящий формат, а далее — запасные варианты.
                        <p>
                            Также с помощью функции <span class="mean">local</span> можно добавить возможность перед загрузкой шрифта с сервера проверить, установлен ли он на компьютере пользователя. Если да, запроса к серверу за шрифтом не будет — при рендеринге используется локальная версия. Но у этого способа есть минус — шрифт на компьютере пользователя может быть устаревшим, и тогда страница отобразится не совсем так, как было задумано.
                        </p>
                    </li>
                    <li>
                        Начертания: жирное, курсивное и так далее. Для каждого начертания нужно отдельное правило <span class="slc">@font-face</span>.
                    </li>
                </ol>
                <p>
                    Базовый вариант правила:
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_45.png" alt="@font-face">
                </p>
                <p>
                    Для улучшения производительности правило <span class="slc">@font-face</span> лучше всего прописывать в самом начале CSS-файла. Так браузер сможет раньше начать обработку шрифта.
                </p>
            </section>
            <section class="optimization" id="optimization">
                <h2>Оптимизация</h2>
                <p>
                    Выбор современного формата шрифта, который обладает хорошей степенью сжатия — это только первый шаг к оптимизации. Можно сделать гораздо больше, чтобы увеличить скорость загрузки страницы и сделать пользовательский опыт при взаимодействии с интерфейсом приятнее.
                </p>
                <h3>FOIT, FOUT и FOFT</h3>
                <p>
                    Пока шрифт загружается, при рендеринге можно наблюдать разное поведение текста:
                </p>
                <p>
                    FOIT (англ. <i>Flash of Invisible Text</i>  —  «мелькание невидимого текста»). <br>
                     При таком поведении, пока шрифт не загрузится, текст не отображается и появляется только после загрузки шрифта. Значительная проблема — во время загрузки нет доступа к текстовому контенту.
                </p>
                <p>
                    FOUT (англ. <i>Flash of Unstyled Text</i> — «мелькание неоформленного текста»). <br>
                     Во время загрузки используется шрифт, заданный по умолчанию (системный, например), а после загрузки страница перерисовывается с использованием загрузившегося шрифта. Эта перерисовка довольно заметна и может быть нежелательна.
                </p>
                <p>
                    FOFT (англ. <i>Flash of Faux Text</i> — «мелькание синтезированного текста»). <br>
                     Это поведение можно наблюдать в промежутке, когда основное начертание уже загрузилось, а дополнительные (жирное, курсивное и т.д.) — нет. Браузер имитирует нужное начертание до загрузки настоящей версии. В этом случае страница может перерисовываться несколько раз по мере загрузки начертаний.
                </p>
                <p>
                    В разных браузерах логика рендеринга текста во время загрузки шрифта отличается. Например, Chrome и Firefox в течение трёх секунд не отрисовывают ничего, затем используют веб-безопасный шрифт, а после окончания загрузки текст перерисовывается. IE поступает похоже, но при этом не ждёт три секунды.
                </p> 
                <p>    
                    Подобное поведение в разных браузерах можно унифицировать, используя свойство <span class="slc">font‑display</span>.
                </p>
                <div class="titles">
                    <h5>font‑display</h5>
                    <p>
                        <a href="https://developer.mozilla.org/ru/docs/Web/CSS/@font-face/font-display" target="_blank">Спецификация MDN</a>
                    </p>
                </div>
                <p>
                    У свойства есть несколько значений, которые определяют поведение текста во время загрузки шрифта:
                </p>
                <p>
                    <span class="mean">auto </span> — поведение по умолчанию, зависит от браузера.
                </p>
                <p>
                    <span class="mean">block </span> — текст не отображается в течение короткого периода (3 секунды), затем отрисовывается запасной шрифт, если основной ещё не загрузился. Как только загрузка завершается, текст перерисовывается снова.
                </p>
                <p>
                    <span class="mean">swap </span> — сразу же отрисовывается запасной шрифт, после загрузки шрифта — повторный рендеринг.
                </p>
                <p>
                    <span class="mean">fallback </span> — в течение очень короткого периода (100 миллисекунд) не отображается ничего, затем браузер использует запасной шрифт и ждёт 3 секунды — если шрифт всё ещё не загрузился, остаётся запасной шрифт. Далее не важно, загрузился шрифт или нет, замена не произойдёт. Если шрифт загрузится, то он применится только при обновлении страницы.
                </p>
                <p>
                    <span class="mean">optional </span> — текст не отображается в течение 100 миллисекунд, а затем отрисовывается запасным шрифтом. Даже если шрифт загрузится после этого, замена произойдёт только при обновлении страницы.
                </p>
                <p>
                    Оптимальное значение — <span class="mean">swap </span>, его можно использовать в большинстве случаев, оно удобно для пользователей. При подключении шрифта с помощью Google Fonts это значение установлено по умолчанию. Если же есть необходимость избежать мелькания текста (например, для вдумчивого чтения), подойдёт <span class="mean">optional </span>.
                </p>
                <h3>Предзагрузка шрифтов</h3>
                <p>
                    Ещё один способ оптимизации — предварительная загрузка шрифтов. С её помощью можно изменить обычную приоритезацию загрузки ресурсов, тем самым сказав браузеру, что важно загрузить шрифт в первую очередь.
                </p>
                <p>
                    Стоит учесть, что браузер загрузит шрифт в любом случае — даже если он не используется на странице. И, обладая высоким приоритетом, эта загрузка может блокировать загрузку других ресурсов, поэтому нужно грамотно выбирать, что именно предзагружать. Например, если на странице используются три разных шрифта, стоит предзагрузить только основной шрифт без дополнительных начертаний.
                </p>
                <p>
                    Для того, чтобы предзагрузка сработала, нужно поместить в <span class="tag">&lt;head&gt;</span> ссылку на шрифт и задать атрибуту <span class="atr">rel</span> значение <span class="mean">preload</span>:
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_46.png" alt="Предзагрузка шрифтов">
                </p>
                <p>
                    Также необходимо добавить тип ресурса, в данном случае — <span class="mean">font</span>. Предзагружать можно и другие ресурсы — CSS-файлы, изображения и т.д.
                </p>
                <h3>Уменьшение количества глифов шрифта</h3>
                <p>
                    По умолчанию шрифт может содержать глифы (буквы, символы) разных языков и просто редко используемые. 
                </p>
                <div class="titles">
                    <h5>unicode-range</h5>
                    <p>
                        <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range" target="_blank">Спецификация MDN</a>
                    </p>
                </div>
                <p>
                    С помощью свойства <span class="slc">unicode-range</span> можно установить диапазон нужных символов в системе <em>Unicode</em>, тогда браузер будет подгружать <strong>сабсет</strong> (подмножество) шрифта только в тот момент, когда на странице появится символ из этого диапазона. Предварительно нужно подготовить файлы шрифтов, разбив их на группы.  
                </p>
                <p>
                    Например, можно отдельно подключить латиницу и кириллицу, если на сайте представлены версии на двух языках. И с помощью <span class="slc">unicode-range</span> браузер поймёт, какой <strong>сабсет</strong> нужен для конкретной страницы, и загрузит только его. Такой файл будет иметь меньший вес и ускорит загрузку страницы.
                </p>
                <p>
                    Также можно проанализировать, какие конкретно глифы используются на сайте и создать кастомный сабсет исключительно с ними. Для этого есть <a href="https://github.com/filamentgroup/glyphhanger" target="_blank"><strong>специальные инструменты</strong></a>.
                </p>
                <p>
                    Google Fonts по умолчанию использует сабсеты. Это можно увидеть, открыв <a href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" target="_blank"><strong>CSS-файл</strong></a>, который подключается в <span class="tag">&lt;head&gt;</span> при использовании сервиса. Для каждого языка есть отдельный сабсет. Пример для латиницы и кириллицы:
                </p>
                <p>
                    <img src="./img/css-properties-img/Screenshot_47.png" alt="сабсеты" class="subset">
                    <img src="./img/css-properties-img/Screenshot_48.png" alt="сабсеты" class="subset">
                </p>
                <p>
                    В статье разобраны только базовые способы оптимизации шрифтов. Но даже их достаточно, чтобы улучшить пользовательский опыт и значительно уменьшить вес файлов шрифтов, ускорив тем самым загрузку страницы.
                </p>
                <h3>Полезности</h3>
                <p>
                    &#10148; <a href="https://youtu.be/MTQ9FpT3ayc" target="_blank"><strong>HTML шорты: посторонние шрифты.</strong></a> <br>
                    Про подключение шрифтов и методы оптимизации.
                </p>
                <p>
                    &#10148; <a href="https://font-display.glitch.me/" target="_blank"><strong>Статья о font-display. </strong></a> <br>
                    В ней кроме прочего приведена наглядная схема того, как работают все значения свойства.
                </p>
                <p>
                    &#10148; <a href="https://css-live.ru/articles/ischerpyvayushhee-rukovodstvo-po-strategiyam-zagruzki-veb-shriftov.html" target="_blank"><strong>Исчерпывающее руководство по стратегиям загрузки веб-шрифтов.</strong></a> <br>
                    Подробный разбор плюсов и минусов методов подключения и оптимизации шрифтов.
                </p>
                <p>
                    &#10148; <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/webfont-optimization?hl=ru" target="_blank"><strong>Оптимизация шрифтов.</strong></a> <br>
                    В статье разобраны разные методы: использование сабсетов шрифтов в зависимости от языка, HTTP-кеширование, Font Loading API и так далее.
                </p>
                <p>
                    &#10148; <a href="https://youtu.be/uI3Q5m9xkkw" target="_blank"><strong>Доклад Вадима Макеева про шрифты.</strong></a> <br>
                    
                </p>
                <p>
                    &#10148; <a href="https://www.afasterweb.com/2018/03/09/subsetting-fonts-with-glyphhanger/" target="_blank"><strong>Subsetting Fonts with Glyphhanger.</strong></a> <br>
                    Статья о том, как использовать инструмент для создания сабсетов.
                </p>
            </section>
            <!-- КНОПКА -->
            <a href="#header" class="btn">ВВЕРХ</a>
        </div>
    </main>
    <footer class="footer">
        <div class="container">
            <p>
                &copy; Sergey Moshkovsky
            </p>
        </div>
    </footer>
</body>
</html>